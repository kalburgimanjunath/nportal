{"version":3,"sources":["5-es2017.fd04f5017183c914c8d5.js","webpack:///src/app/containers/user/index.ts","webpack:///src/app/containers/user/user.component.ts","webpack:///src/app/containers/user/user.component.ts.UserComponent.html","webpack:///src/app/containers/user/user-player.service.ts","webpack:///src/app/containers/user/playlists/playlists.component.ts","webpack:///src/app/containers/user/playlists/playlists.component.ts.PlaylistsComponent.html","webpack:///src/app/containers/user/user.guard.ts"],"names":["window","webpackJsonp","push","3y5d","module","__webpack_exports__","__webpack_require__","r","core","UserModule","user_component_UserComponent","appApi","store","this","playlists$","select","user_profile_selectors","c","currentPlaylist$","d","isSignedIn$","a","signinUser","prototype","ngOnInit","signInUser","_l","_v","en","$event","ad","_co","component","icon_directive_ngfactory","b","icon_directive","ElementRef","Renderer2","name","_ck","app_navbar_component_ngfactory","app_navbar_component","authorization_service","app_api","header","headerIcon","View_UserComponent_1","common","NgIf","ViewContainerRef","TemplateRef","ngIf","AsyncPipe","ChangeDetectorRef","router","p","ComponentFactoryResolver","transform","user_player_service_UserPlayerService","nowPlaylistService","userProfile","media","playSelectedPlaylist","playlist","_this","fetchPlaylistItems","id","subscribe","items","dispatch","now_playlist","h","updateIndexByMedia","app_player","queuePlaylist","queueVideo","g","playVideo","n","PlaylistsComponent","userPlayerService","state","user","playlists","queueSelectedPlaylist","youtube_playlist_ngfactory","youtube_playlist","link","play","queue","context","$implicit","View_PlaylistsComponent_1","NgForOf","IterableDiffers","ngForOf","AuthGuard","authorization","canActivate","route","url","checkLogin","canActivateChild","isSignIn","navigate"],"mappings":"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","file":"5-es2017.fd04f5017183c914c8d5.js","sourcesContent":["(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{\"3y5d\":function(module,__webpack_exports__,__webpack_require__){\"use strict\";__webpack_require__.r(__webpack_exports__);var core=__webpack_require__(\"8Y7J\");class UserModule{}var router_ngfactory=__webpack_require__(\"pMnS\"),TooltipContent_ngfactory=__webpack_require__(\"z/Lv\"),playlist_view_component_ngfactory=__webpack_require__(\"FVZe\"),icon_directive_ngfactory=__webpack_require__(\"4kRb\"),icon_directive=__webpack_require__(\"i8We\"),app_navbar_component_ngfactory=__webpack_require__(\"A1CB\"),app_navbar_component=__webpack_require__(\"fvbr\"),authorization_service=__webpack_require__(\"on8i\"),app_api=__webpack_require__(\"Rgni\"),common=__webpack_require__(\"SVse\"),router=__webpack_require__(\"iInd\"),user_profile_selectors=__webpack_require__(\"1nAt\");class user_component_UserComponent{constructor(appApi,store){this.appApi=appApi,this.store=store,this.playlists$=this.store.select(user_profile_selectors.c),this.currentPlaylist$=this.store.select(user_profile_selectors.d),this.isSignedIn$=this.store.select(user_profile_selectors.a)}ngOnInit(){}signInUser(){this.appApi.signinUser()}}var fesm2015_store=__webpack_require__(\"DQLy\"),styles_UserComponent=[[\"app-user article{padding-bottom:5rem;padding-top:7rem}app-user h2 small{color:gray}app-user .youtube-items-container{display:flex;flex-direction:row;flex-wrap:wrap;justify-content:center}\"]],RenderType_UserComponent=core[\"ɵcrt\"]({encapsulation:2,styles:styles_UserComponent,data:{}});function View_UserComponent_1(_l){return core[\"ɵvid\"](0,[(_l()(),core[\"ɵeld\"](0,0,null,null,5,\"p\",[[\"class\",\"well lead\"]],null,null,null,null,null)),(_l()(),core[\"ɵted\"](-1,null,[\" To view your playlists in youtube, you need to sign in. \"])),(_l()(),core[\"ɵeld\"](2,0,null,null,3,\"button\",[[\"class\",\"btn btn-lg btn-primary\"]],null,[[null,\"click\"]],(function(_v,en,$event){var ad=!0,_co=_v.component;\"click\"===en&&(ad=!1!==_co.signInUser()&&ad);return ad}),null,null)),(_l()(),core[\"ɵeld\"](3,0,null,null,1,\"icon\",[[\"name\",\"google\"]],null,null,null,icon_directive_ngfactory.b,icon_directive_ngfactory.a)),core[\"ɵdid\"](4,638976,null,0,icon_directive.b,[core.ElementRef,core.Renderer2],{name:[0,\"name\"]},null),(_l()(),core[\"ɵted\"](-1,null,[\" Sign In \"]))],(function(_ck,_v){_ck(_v,4,0,\"google\")}),null)}function View_UserComponent_0(_l){return core[\"ɵvid\"](0,[(_l()(),core[\"ɵeld\"](0,0,null,null,7,\"article\",[],null,null,null,null,null)),(_l()(),core[\"ɵeld\"](1,0,null,null,1,\"app-navbar\",[],null,null,null,app_navbar_component_ngfactory.b,app_navbar_component_ngfactory.a)),core[\"ɵdid\"](2,114688,null,0,app_navbar_component.a,[authorization_service.a,app_api.a],{header:[0,\"header\"],headerIcon:[1,\"headerIcon\"]},null),(_l()(),core[\"ɵand\"](16777216,null,null,2,null,View_UserComponent_1)),core[\"ɵdid\"](4,16384,null,0,common.NgIf,[core.ViewContainerRef,core.TemplateRef],{ngIf:[0,\"ngIf\"]},null),core[\"ɵpid\"](131072,common.AsyncPipe,[core.ChangeDetectorRef]),(_l()(),core[\"ɵeld\"](6,16777216,null,null,1,\"router-outlet\",[],null,null,null,null,null)),core[\"ɵdid\"](7,212992,null,0,router.p,[router.b,core.ViewContainerRef,core.ComponentFactoryResolver,[8,null],core.ChangeDetectorRef],null,null)],(function(_ck,_v){var _co=_v.component;_ck(_v,2,0,\"My Profile - My Playlists\",\"heart-o\"),_ck(_v,4,0,!core[\"ɵunv\"](_v,4,0,core[\"ɵnov\"](_v,5).transform(_co.isSignedIn$))),_ck(_v,7,0)}),null)}var UserComponentNgFactory=core[\"ɵccf\"](\"app-user\",user_component_UserComponent,(function(_l){return core[\"ɵvid\"](0,[(_l()(),core[\"ɵeld\"](0,0,null,null,1,\"app-user\",[],null,null,null,View_UserComponent_0,RenderType_UserComponent)),core[\"ɵdid\"](1,114688,null,0,user_component_UserComponent,[app_api.a,fesm2015_store.m],null,null)],(function(_ck,_v){_ck(_v,1,0)}),null)}),{},{},[]),youtube_playlist_ngfactory=__webpack_require__(\"xg+j\"),youtube_playlist=__webpack_require__(\"rJEC\"),now_playlist=(__webpack_require__(\"dJ3e\"),__webpack_require__(\"A60w\")),app_player=__webpack_require__(\"V3/2\");class user_player_service_UserPlayerService{constructor(nowPlaylistService,userProfile,store){this.nowPlaylistService=nowPlaylistService,this.userProfile=userProfile,this.store=store}playSelectedPlaylist(playlist){this.userProfile.fetchPlaylistItems(playlist.id,\"\").subscribe(items=>{this.store.dispatch(new now_playlist.h(items)),this.nowPlaylistService.updateIndexByMedia(items[0].id),this.store.dispatch(new app_player.c(items[0]))})}queuePlaylist(playlist){this.userProfile.fetchPlaylistItems(playlist.id,\"\").subscribe(items=>(this.store.dispatch(new now_playlist.h(items)),items))}queueVideo(media){this.store.dispatch(new now_playlist.g(media))}playVideo(media){this.store.dispatch(new app_player.c(media)),this.store.dispatch(new now_playlist.g(media)),this.store.dispatch(new now_playlist.n(media))}}class PlaylistsComponent{constructor(store,userPlayerService){this.store=store,this.userPlayerService=userPlayerService,this.playlists$=this.store.select(state=>state.user.playlists)}ngOnInit(){}playSelectedPlaylist(playlist){this.userPlayerService.playSelectedPlaylist(playlist)}queueSelectedPlaylist(playlist){this.userPlayerService.queuePlaylist(playlist)}}var RenderType_PlaylistsComponent=core[\"ɵcrt\"]({encapsulation:2,styles:[],data:{}});function View_PlaylistsComponent_1(_l){return core[\"ɵvid\"](0,[(_l()(),core[\"ɵeld\"](0,0,null,null,1,\"youtube-playlist\",[[\"link\",\"/user/\"]],null,[[null,\"play\"],[null,\"queue\"]],(function(_v,en,$event){var ad=!0,_co=_v.component;\"play\"===en&&(ad=!1!==_co.playSelectedPlaylist(_v.context.$implicit)&&ad);\"queue\"===en&&(ad=!1!==_co.queueSelectedPlaylist(_v.context.$implicit)&&ad);return ad}),youtube_playlist_ngfactory.b,youtube_playlist_ngfactory.a)),core[\"ɵdid\"](1,49152,null,0,youtube_playlist.a,[],{media:[0,\"media\"],link:[1,\"link\"]},{play:\"play\",queue:\"queue\"})],(function(_ck,_v){_ck(_v,1,0,_v.context.$implicit,\"/user/\")}),null)}function View_PlaylistsComponent_0(_l){return core[\"ɵvid\"](0,[(_l()(),core[\"ɵeld\"](0,0,null,null,4,\"section\",[[\"class\",\"videos-list\"]],null,null,null,null,null)),(_l()(),core[\"ɵeld\"](1,0,null,null,3,\"div\",[[\"class\",\"list-unstyled ux-maker youtube-items-container clearfix\"]],null,null,null,null,null)),(_l()(),core[\"ɵand\"](16777216,null,null,2,null,View_PlaylistsComponent_1)),core[\"ɵdid\"](3,278528,null,0,common.NgForOf,[core.ViewContainerRef,core.TemplateRef,core.IterableDiffers],{ngForOf:[0,\"ngForOf\"]},null),core[\"ɵpid\"](131072,common.AsyncPipe,[core.ChangeDetectorRef])],(function(_ck,_v){var _co=_v.component;_ck(_v,3,0,core[\"ɵunv\"](_v,3,0,core[\"ɵnov\"](_v,4).transform(_co.playlists$)))}),null)}var PlaylistsComponentNgFactory=core[\"ɵccf\"](\"playlists\",PlaylistsComponent,(function(_l){return core[\"ɵvid\"](0,[(_l()(),core[\"ɵeld\"](0,0,null,null,1,\"playlists\",[],null,null,null,View_PlaylistsComponent_0,RenderType_PlaylistsComponent)),core[\"ɵdid\"](1,114688,null,0,PlaylistsComponent,[fesm2015_store.m,user_player_service_UserPlayerService],null,null)],(function(_ck,_v){_ck(_v,1,0)}),null)}),{},{},[]),fesm2015_forms=__webpack_require__(\"s7LF\"),ngx_youtube_player=__webpack_require__(\"Fmad\"),http=__webpack_require__(\"IheW\"),drag_drop=__webpack_require__(\"Mc5n\"),scrolling=__webpack_require__(\"hOhj\"),playlist_view_proxy=__webpack_require__(\"VZc2\"),user_profile_actions=__webpack_require__(\"xXUb\"),app_player_api=__webpack_require__(\"7iwo\");class AuthGuard{constructor(authorization,router){this.authorization=authorization,this.router=router}canActivate(route,state){const url=state.url;return this.checkLogin(url)}canActivateChild(route,state){return this.canActivate(route,state)}checkLogin(url){return!!this.authorization.isSignIn()||(this.router.navigate([\"/user\"]),!1)}}var now_playlist_service=__webpack_require__(\"//FL\"),user_profile_service=__webpack_require__(\"Hzbm\"),ngx_infinite_scroll=__webpack_require__(\"MNke\"),ngx_typeahead=__webpack_require__(\"dyNX\"),ngx_tooltip=__webpack_require__(\"7mek\"),shared=__webpack_require__(\"M0ag\"),app_navbar=__webpack_require__(\"AZlO\"),playlist_view=__webpack_require__(\"2gtn\"),playlist_view_component=__webpack_require__(\"DRws\"),playlist_videos_resolver=__webpack_require__(\"EAg1\"),playlist_resolver=__webpack_require__(\"GZtC\");__webpack_require__.d(__webpack_exports__,\"UserModuleNgFactory\",(function(){return UserModuleNgFactory}));var UserModuleNgFactory=core[\"ɵcmf\"](UserModule,[],(function(_l){return core[\"ɵmod\"]([core[\"ɵmpd\"](512,core.ComponentFactoryResolver,core[\"ɵCodegenComponentFactoryResolver\"],[[8,[router_ngfactory.a,TooltipContent_ngfactory.a,playlist_view_component_ngfactory.a,UserComponentNgFactory,PlaylistsComponentNgFactory]],[3,core.ComponentFactoryResolver],core.NgModuleRef]),core[\"ɵmpd\"](4608,common.NgLocalization,common.NgLocaleLocalization,[core.LOCALE_ID,[2,common[\"ɵangular_packages_common_common_a\"]]]),core[\"ɵmpd\"](4608,fesm2015_forms.n,fesm2015_forms.n,[]),core[\"ɵmpd\"](4608,ngx_youtube_player.c,ngx_youtube_player.c,[core.NgZone]),core[\"ɵmpd\"](4608,http.k,http.u,[common.DOCUMENT,core.PLATFORM_ID,http.s]),core[\"ɵmpd\"](4608,http.v,http.v,[http.k,http.t]),core[\"ɵmpd\"](5120,http.p,http.q,[]),core[\"ɵmpd\"](4608,http.l,http.l,[http.p,common.DOCUMENT]),core[\"ɵmpd\"](5120,http.a,(function(p0_0,p1_0){return[p0_0,new http.m(p1_0)]}),[http.v,http.l]),core[\"ɵmpd\"](4608,http.r,http.r,[]),core[\"ɵmpd\"](6144,http.n,null,[http.r]),core[\"ɵmpd\"](4608,http.j,http.j,[http.n]),core[\"ɵmpd\"](6144,http.b,null,[http.j]),core[\"ɵmpd\"](4608,http.g,http.o,[http.b,core.Injector]),core[\"ɵmpd\"](4608,http.c,http.c,[http.g]),core[\"ɵmpd\"](4608,drag_drop.f,drag_drop.f,[common.DOCUMENT,core.NgZone,scrolling.a,drag_drop.h]),core[\"ɵmpd\"](4608,playlist_view_proxy.a,playlist_view_proxy.a,[fesm2015_store.m,user_profile_actions.c,app_player_api.a,app_api.a]),core[\"ɵmpd\"](4608,AuthGuard,AuthGuard,[authorization_service.a,router.k]),core[\"ɵmpd\"](4608,user_player_service_UserPlayerService,user_player_service_UserPlayerService,[now_playlist_service.a,user_profile_service.a,fesm2015_store.m]),core[\"ɵmpd\"](1073742336,common.CommonModule,common.CommonModule,[]),core[\"ɵmpd\"](1073742336,fesm2015_forms.m,fesm2015_forms.m,[]),core[\"ɵmpd\"](1073742336,fesm2015_forms.g,fesm2015_forms.g,[]),core[\"ɵmpd\"](1073742336,router.o,router.o,[[2,router.t],[2,router.k]]),core[\"ɵmpd\"](1073742336,ngx_youtube_player.a,ngx_youtube_player.a,[]),core[\"ɵmpd\"](1073742336,ngx_infinite_scroll.b,ngx_infinite_scroll.b,[]),core[\"ɵmpd\"](1073742336,http.f,http.f,[]),core[\"ɵmpd\"](1073742336,http.e,http.e,[]),core[\"ɵmpd\"](1073742336,http.d,http.d,[]),core[\"ɵmpd\"](1073742336,ngx_typeahead.a,ngx_typeahead.a,[]),core[\"ɵmpd\"](1073742336,ngx_tooltip.TooltipModule,ngx_tooltip.TooltipModule,[]),core[\"ɵmpd\"](1073742336,drag_drop.g,drag_drop.g,[]),core[\"ɵmpd\"](1073742336,shared.a,shared.a,[]),core[\"ɵmpd\"](1073742336,app_navbar.a,app_navbar.a,[]),core[\"ɵmpd\"](1073742336,playlist_view.a,playlist_view.a,[]),core[\"ɵmpd\"](1073742336,UserModule,UserModule,[]),core[\"ɵmpd\"](256,http.s,\"XSRF-TOKEN\",[]),core[\"ɵmpd\"](256,http.t,\"X-XSRF-TOKEN\",[]),core[\"ɵmpd\"](1024,router.i,(function(){return[[{path:\"playlist/:id\",component:playlist_view_component.a,resolve:{videos:playlist_videos_resolver.a,playlist:playlist_resolver.a}}],[{path:\"\",component:user_component_UserComponent,children:[{path:\"\",redirectTo:\"playlists\",pathMatch:\"full\"},{path:\"playlists\",component:PlaylistsComponent},{path:\"playlist/:id\",component:playlist_view_component.a,canActivate:[AuthGuard],canActivateChild:[AuthGuard],resolve:{videos:playlist_videos_resolver.a,playlist:playlist_resolver.a}}]}]]}),[])])}))}}]);\n//# sourceMappingURL=5-es2017.fd04f5017183c914c8d5.js.map","import { NgModule } from '@angular/core';\r\nimport { SharedModule } from '@shared/index';\r\nimport { AppNavbarModule } from '../app-navbar';\r\n\r\nimport { PlaylistViewModule } from '../playlist-view'\r\n\r\nimport { UserComponent } from './user.component';\r\nimport { PlaylistsComponent } from './playlists';\r\n// import { PlaylistViewComponent, PlaylistResolver, PlaylistVideosResolver } from '@shared/components/playlist-view';\r\n\r\nimport { AuthGuard } from './user.guard';\r\nimport { UserPlayerService } from './user-player.service';\r\nimport { routing } from './user.routing';\r\n\r\n@NgModule({\r\n  imports: [\r\n    SharedModule,\r\n    AppNavbarModule,\r\n    PlaylistViewModule,\r\n    routing\r\n  ],\r\n  declarations: [\r\n    UserComponent,\r\n    PlaylistsComponent\r\n  ],\r\n  exports: [\r\n    UserComponent\r\n  ],\r\n  providers: [\r\n    AuthGuard,\r\n    UserPlayerService,\r\n    // PlaylistResolver,\r\n    // PlaylistVideosResolver\r\n  ]\r\n})\r\nexport class UserModule { }\r\n","import { Component, OnInit, ViewEncapsulation } from '@angular/core';\r\nimport { Store } from '@ngrx/store';\r\nimport { EchoesState } from '@core/store';\r\n\r\nimport * as UserProfile from '@core/store/user-profile/user-profile.selectors';\r\nimport { AppApi } from '@api/app.api';\r\n\r\n@Component({\r\n  selector: 'app-user',\r\n  encapsulation: ViewEncapsulation.None,\r\n  styleUrls: ['./user.scss'],\r\n  template: `\r\n  <article>\r\n    <app-navbar\r\n      [header]=\"'My Profile - My Playlists'\"\r\n      [headerIcon]=\"'heart-o'\"\r\n    ></app-navbar>\r\n    <p *ngIf=\"!(isSignedIn$ | async)\" class=\"well lead\">\r\n      To view your playlists in youtube, you need to sign in.\r\n      <button class=\"btn btn-lg btn-primary\"\r\n        (click)=\"signInUser()\">\r\n        <icon name=\"google\"></icon> Sign In\r\n      </button>\r\n    </p>\r\n    <router-outlet></router-outlet>\r\n  </article>\r\n  `\r\n})\r\nexport class UserComponent implements OnInit {\r\n  playlists$ = this.store.select(UserProfile.getUserPlaylists);\r\n  currentPlaylist$ = this.store.select(UserProfile.getUserViewPlaylist);\r\n  isSignedIn$ = this.store.select(UserProfile.getIsUserSignedIn);\r\n\r\n  constructor(private appApi: AppApi, public store: Store<EchoesState>) {}\r\n\r\n  ngOnInit() {}\r\n\r\n  signInUser() {\r\n    this.appApi.signinUser();\r\n  }\r\n}\r\n","\n  <article>\n    <app-navbar\n      [header]=\"'My Profile - My Playlists'\"\n      [headerIcon]=\"'heart-o'\"\n    ></app-navbar>\n    <p *ngIf=\"!(isSignedIn$ | async)\" class=\"well lead\">\n      To view your playlists in youtube, you need to sign in.\n      <button class=\"btn btn-lg btn-primary\"\n        (click)=\"signInUser()\">\n        <icon name=\"google\"></icon> Sign In\n      </button>\n    </p>\n    <router-outlet></router-outlet>\n  </article>\n  ","import { Store } from '@ngrx/store';\r\nimport { Injectable } from '@angular/core';\r\nimport { YoutubePlayerService, NowPlaylistService, UserProfile } from '@core/services';\r\nimport { EchoesState } from '@core/store';\r\nimport * as NowPlaylist from '@core/store/now-playlist';\r\nimport * as AppPlayer from '@core/store/app-player';\r\n\r\n@Injectable()\r\nexport class UserPlayerService {\r\n  constructor(\r\n    private nowPlaylistService: NowPlaylistService,\r\n    private userProfile: UserProfile,\r\n    private store: Store<EchoesState>\r\n  ) { }\r\n\r\n  playSelectedPlaylist(playlist: GoogleApiYouTubePlaylistResource) {\r\n    this.userProfile\r\n      .fetchPlaylistItems(playlist.id, '')\r\n      .subscribe((items: GoogleApiYouTubeVideoResource[]) => {\r\n        this.store.dispatch(new NowPlaylist.QueueVideos(items));\r\n        this.nowPlaylistService.updateIndexByMedia(items[0].id);\r\n        this.store.dispatch(new AppPlayer.LoadAndPlay(items[0]));\r\n      });\r\n  }\r\n\r\n  queuePlaylist(playlist: GoogleApiYouTubePlaylistResource) {\r\n    this.userProfile\r\n      .fetchPlaylistItems(playlist.id, '')\r\n      .subscribe((items: GoogleApiYouTubeVideoResource[]) => {\r\n        this.store.dispatch(new NowPlaylist.QueueVideos(items));\r\n        return items;\r\n      });\r\n  }\r\n\r\n  queueVideo(media: GoogleApiYouTubeVideoResource) {\r\n    this.store.dispatch(new NowPlaylist.QueueVideo(media));\r\n  }\r\n\r\n  playVideo(media: GoogleApiYouTubeVideoResource) {\r\n    this.store.dispatch(new AppPlayer.LoadAndPlay(media));\r\n    this.store.dispatch(new NowPlaylist.QueueVideo(media));\r\n    this.store.dispatch(new NowPlaylist.SelectVideo(media));\r\n  }\r\n}\r\n","import { UserPlayerService } from '../user-player.service';\r\nimport { EchoesState } from '@core/store';\r\nimport { Component, OnInit } from '@angular/core';\r\nimport { Store } from '@ngrx/store';\r\n\r\n@Component({\r\n  selector: 'playlists',\r\n  template: `\r\n  <section class=\"videos-list\">\r\n    <div class=\"list-unstyled ux-maker youtube-items-container clearfix\">\r\n      <youtube-playlist\r\n        *ngFor=\"let playlist of playlists$ | async\"\r\n        [media]=\"playlist\"\r\n        link=\"/user/\"\r\n        (play)=\"playSelectedPlaylist(playlist)\"\r\n        (queue)=\"queueSelectedPlaylist(playlist)\">\r\n      </youtube-playlist>\r\n    </div>\r\n  </section>\r\n  `\r\n})\r\nexport class PlaylistsComponent implements OnInit {\r\n  playlists$ = this.store.select(state => state.user.playlists);\r\n\r\n  constructor(\r\n    private store: Store<EchoesState>,\r\n    private userPlayerService: UserPlayerService\r\n  ) { }\r\n\r\n  ngOnInit() { }\r\n\r\n  playSelectedPlaylist(playlist: GoogleApiYouTubePlaylistResource) {\r\n    this.userPlayerService.playSelectedPlaylist(playlist);\r\n  }\r\n\r\n  queueSelectedPlaylist(playlist: GoogleApiYouTubePlaylistResource) {\r\n    this.userPlayerService.queuePlaylist(playlist);\r\n  }\r\n}\r\n","\n  <section class=\"videos-list\">\n    <div class=\"list-unstyled ux-maker youtube-items-container clearfix\">\n      <youtube-playlist\n        *ngFor=\"let playlist of playlists$ | async\"\n        [media]=\"playlist\"\n        link=\"/user/\"\n        (play)=\"playSelectedPlaylist(playlist)\"\n        (queue)=\"queueSelectedPlaylist(playlist)\">\n      </youtube-playlist>\n    </div>\n  </section>\n  ","import { Injectable } from '@angular/core';\r\nimport { ActivatedRouteSnapshot, CanActivate, CanActivateChild, Router, RouterStateSnapshot } from '@angular/router';\r\n\r\nimport { Authorization } from '@core/services';\r\n\r\n@Injectable()\r\nexport class AuthGuard implements CanActivate, CanActivateChild {\r\n  constructor(private authorization: Authorization, private router: Router) { }\r\n\r\n  canActivate(route: ActivatedRouteSnapshot, state: RouterStateSnapshot) {\r\n    // console.log('AuthGuard#canActivate called', { state });\r\n    const url: string = state.url;\r\n    return this.checkLogin(url);\r\n  }\r\n\r\n  canActivateChild(route: ActivatedRouteSnapshot, state: RouterStateSnapshot) {\r\n    return this.canActivate(route, state);\r\n  }\r\n\r\n  checkLogin(url: string): boolean {\r\n    if (this.authorization.isSignIn()) { return true; }\r\n\r\n    // Store the attempted URL for redirecting\r\n    // this.authService.redirectUrl = url;\r\n\r\n    // Navigate to the login page with extras\r\n    this.router.navigate(['/user']);\r\n    return false;\r\n  }\r\n}\r\n"]}